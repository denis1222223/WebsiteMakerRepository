@using CloudinaryDotNet
@using CourseProject.Environment
@using Resources

@model CourseProject.Models.ManageModel

@{
    ViewBag.Title = @Resource.ManageTitle;
}

<h2>@ViewBag.Title.</h2>

<div class="col-md-12">
    <h4>@Resource.PictureChanging</h4>
    <hr />
    <div class="col-md-offset-2">
        @if (Model.Picture == null)
            {
            @CloudinaryInitializer.Cloudinary.Api.UrlImgUp.Transform(
                   new Transformation().Width(200).Height(200).Crop("fill")).BuildImageTag("default_avatar_ww0y7e");
            }
            else
            {
            @CloudinaryInitializer.Cloudinary.Api.UrlImgUp.Transform(
                   new Transformation().Width(200).Height(200).Crop("fill")).BuildImageTag(Model.Picture);
            }
    </div>
    <br>
    @using (Html.BeginForm("ChangeImage", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form", enctype = "multipart/form-data" }))
    {
        @Html.LabelFor(m => m.Picture, new { @class = "col-md-2 control-label" })
        <div class="col-md-10">
            <input type="file" id="Picture" name="Picture" accept="image/*">
        </div>
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" value="@Resource.PictureSave" class="btn btn-default" />
        </div>
    }
    <br>
</div>


<div class="col-md-12">
    <br>
    <h4>@Resource.PasswordChanging</h4>
    <hr />
    @using (Html.BeginForm("ChangePassword", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary("", new { @class = "text-danger" })

        <div class="form-group">
            @Html.LabelFor(m => m.OldPassword, new { @class = "col-md-2 control-label" })
            <div class="col-md-10">
                @Html.PasswordFor(m => m.OldPassword, new { @class = "form-control login-input" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(m => m.NewPassword, new { @class = "col-md-2 control-label" })
            <div class="col-md-10">
                @Html.PasswordFor(m => m.NewPassword, new { @class = "form-control login-input" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(m => m.ConfirmPassword, new { @class = "col-md-2 control-label" })
            <div class="col-md-10">
                @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "form-control login-input" })
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="@Resource.PasswordSave" class="btn btn-default" />
            </div>
        </div>
    }
    <br/>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
